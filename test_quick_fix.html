<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba R√°pida - Correcci√≥n de Modelos</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #f5f5f5; 
        }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        pre { 
            background: white; 
            padding: 15px; 
            border-radius: 5px; 
            border-left: 4px solid #007bff;
            margin: 10px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>üß™ Prueba R√°pida - Correcci√≥n de Modelos</h1>
    
    <button onclick="probarModelos()">üîß Probar Modelos</button>
    <button onclick="probarVerificacion()">‚úÖ Probar Verificaci√≥n</button>
    <button onclick="limpiarConsola()">üßπ Limpiar</button>
    
    <pre id="output">Haz clic en "Probar Modelos" para verificar las correcciones...</pre>

    <!-- Cargar modelos -->
    <script src="js/models/Ingreso.js"></script>
    <script src="js/models/Gasto.js"></script>
    <script src="js/utils/verificacion.js"></script>

    <script>
        const output = document.getElementById('output');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'info';
            output.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
            output.scrollTop = output.scrollHeight;
        }
        
        function limpiarConsola() {
            output.innerHTML = 'Consola limpiada...\n';
        }
        
        function probarModelos() {
            log('üîß INICIANDO PRUEBA DE MODELOS CORREGIDOS', 'info');
            log('=' .repeat(50), 'info');
            
            try {
                // Probar Ingreso con datos correctos
                log('\nüìà Probando clase Ingreso...', 'info');
                const ingresoData = {
                    descripcion: 'Salario Enero 2025',
                    monto: 5000,
                    fecha: '2025-01-15',
                    tipo: 'nomina',
                    recurrente: true,
                    frecuencia: 'mensual'
                };
                
                const ingreso = new Ingreso(ingresoData);
                log(`‚úÖ Ingreso creado exitosamente:`, 'success');
                log(`   - ID: ${ingreso.id}`, 'info');
                log(`   - Descripci√≥n: ${ingreso.descripcion}`, 'info');
                log(`   - Monto: $${ingreso.monto}`, 'info');
                log(`   - Fecha: ${ingreso.fecha}`, 'info');
                log(`   - Tipo: ${ingreso.tipo}`, 'info');
                
                // Probar validaci√≥n
                log('üîç Probando validaci√≥n...', 'info');
                if (ingreso.validar()) {
                    log('‚úÖ Validaci√≥n exitosa', 'success');
                } else {
                    log('‚ùå Validaci√≥n fall√≥', 'error');
                }
                
            } catch (error) {
                log(`‚ùå Error creando Ingreso: ${error.message}`, 'error');
            }
            
            try {
                // Probar Gasto con datos correctos
                log('\nüí∏ Probando clase Gasto...', 'info');
                const gastoData = {
                    descripcion: 'Renta Departamento',
                    monto: 1500,
                    fechaVencimiento: '2025-01-31',
                    tipo: 'alquiler',
                    prioridad: 'alta',
                    recurrente: true,
                    frecuencia: 'mensual'
                };
                
                const gasto = new Gasto(gastoData);
                log(`‚úÖ Gasto creado exitosamente:`, 'success');
                log(`   - ID: ${gasto.id}`, 'info');
                log(`   - Descripci√≥n: ${gasto.descripcion}`, 'info');
                log(`   - Monto: $${gasto.monto}`, 'info');
                log(`   - Vencimiento: ${gasto.fechaVencimiento}`, 'info');
                log(`   - Prioridad: ${gasto.prioridad}`, 'info');
                
                // Probar validaci√≥n
                log('üîç Probando validaci√≥n...', 'info');
                if (gasto.validar()) {
                    log('‚úÖ Validaci√≥n exitosa', 'success');
                } else {
                    log('‚ùå Validaci√≥n fall√≥', 'error');
                }
                
            } catch (error) {
                log(`‚ùå Error creando Gasto: ${error.message}`, 'error');
            }
            
            log('\nüéâ PRUEBA DE MODELOS COMPLETADA', 'success');
        }
        
        function probarVerificacion() {
            log('üîç INICIANDO VERIFICACI√ìN CORREGIDA', 'info');
            log('=' .repeat(50), 'info');
            
            try {
                // Capturar console.log original
                const originalLog = console.log;
                console.log = function(...args) {
                    log(args.join(' '), 'info');
                    originalLog.apply(console, args);
                };
                
                // Ejecutar verificaci√≥n
                verificarSistema();
                
                // Restaurar console.log
                console.log = originalLog;
                
                log('\nüéâ VERIFICACI√ìN COMPLETADA', 'success');
                
            } catch (error) {
                log(`‚ùå Error en verificaci√≥n: ${error.message}`, 'error');
                console.log = console.log.originalLog || console.log;
            }
        }
        
        // Log inicial
        log('‚úÖ Sistema de pruebas cargado', 'success');
        log('üí° Los modelos est√°n disponibles para pruebas', 'info');
    </script>
</body>
</html>
